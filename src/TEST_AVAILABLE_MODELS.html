<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Gemini API - Find Available Models</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white min-h-screen p-8">
  <div class="max-w-4xl mx-auto">
    <h1 class="text-3xl font-bold mb-6">üîç Gemini API Model Tester</h1>
    
    <div class="bg-gray-800 p-6 rounded-lg mb-6">
      <h2 class="text-xl font-semibold mb-4">Step 1: List Available Models</h2>
      <input 
        type="text" 
        id="apiKey1" 
        placeholder="Enter your Google Gemini API Key"
        class="w-full bg-gray-700 text-white px-4 py-2 rounded mb-4"
      />
      <button 
        onclick="listModels()" 
        class="bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded font-semibold"
      >
        List Available Models
      </button>
      <pre id="modelsResult" class="mt-4 bg-gray-900 p-4 rounded overflow-x-auto text-sm"></pre>
    </div>

    <div class="bg-gray-800 p-6 rounded-lg mb-6">
      <h2 class="text-xl font-semibold mb-4">Step 2: Test a Specific Model</h2>
      <input 
        type="text" 
        id="apiKey2" 
        placeholder="Enter your Google Gemini API Key"
        class="w-full bg-gray-700 text-white px-4 py-2 rounded mb-4"
      />
      <input 
        type="text" 
        id="modelName" 
        placeholder="Model name (e.g., gemini-pro)"
        value="gemini-pro"
        class="w-full bg-gray-700 text-white px-4 py-2 rounded mb-4"
      />
      <button 
        onclick="testModel()" 
        class="bg-green-600 hover:bg-green-700 px-6 py-2 rounded font-semibold"
      >
        Test Model
      </button>
      <pre id="testResult" class="mt-4 bg-gray-900 p-4 rounded overflow-x-auto text-sm"></pre>
    </div>

    <div class="bg-gray-800 p-6 rounded-lg">
      <h2 class="text-xl font-semibold mb-4">üìã Common Model Names to Try</h2>
      <ul class="space-y-2">
        <li><code class="bg-gray-700 px-2 py-1 rounded">gemini-pro</code> - Stable, older model</li>
        <li><code class="bg-gray-700 px-2 py-1 rounded">gemini-1.5-pro</code> - High quality</li>
        <li><code class="bg-gray-700 px-2 py-1 rounded">gemini-1.5-flash</code> - Fast</li>
        <li><code class="bg-gray-700 px-2 py-1 rounded">gemini-1.5-flash-002</code> - Specific version</li>
        <li><code class="bg-gray-700 px-2 py-1 rounded">gemini-1.5-pro-002</code> - Specific version</li>
      </ul>
    </div>
  </div>

  <script>
    async function listModels() {
      const apiKey = document.getElementById('apiKey1').value.trim();
      const resultDiv = document.getElementById('modelsResult');
      
      if (!apiKey) {
        resultDiv.textContent = '‚ùå Please enter your API key';
        return;
      }

      resultDiv.textContent = '‚è≥ Fetching available models...';

      try {
        const response = await fetch(
          `https://generativelanguage.googleapis.com/v1beta/models?key=${apiKey}`
        );

        const data = await response.json();

        if (data.error) {
          resultDiv.textContent = `‚ùå Error: ${data.error.message}`;
          return;
        }

        if (data.models) {
          const generateContentModels = data.models
            .filter(m => m.supportedGenerationMethods?.includes('generateContent'))
            .map(m => ({
              name: m.name.replace('models/', ''),
              displayName: m.displayName,
              description: m.description
            }));

          resultDiv.textContent = '‚úÖ Models that support generateContent:\n\n' + 
            JSON.stringify(generateContentModels, null, 2);
        } else {
          resultDiv.textContent = '‚ùå No models found\n\n' + JSON.stringify(data, null, 2);
        }
      } catch (error) {
        resultDiv.textContent = `‚ùå Error: ${error.message}`;
      }
    }

    async function testModel() {
      const apiKey = document.getElementById('apiKey2').value.trim();
      const modelName = document.getElementById('modelName').value.trim();
      const resultDiv = document.getElementById('testResult');
      
      if (!apiKey) {
        resultDiv.textContent = '‚ùå Please enter your API key';
        return;
      }

      if (!modelName) {
        resultDiv.textContent = '‚ùå Please enter a model name';
        return;
      }

      resultDiv.textContent = `‚è≥ Testing model: ${modelName}...`;

      try {
        const response = await fetch(
          `https://generativelanguage.googleapis.com/v1beta/models/${modelName}:generateContent?key=${apiKey}`,
          {
            method: 'POST',
            headers: { 
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              contents: [{
                parts: [{
                  text: 'Say hello in 5 words'
                }]
              }],
              generationConfig: {
                temperature: 0.7,
                maxOutputTokens: 100
              }
            })
          }
        );

        const data = await response.json();

        if (data.error) {
          resultDiv.textContent = `‚ùå Error (${response.status}):\n\n${JSON.stringify(data.error, null, 2)}`;
        } else if (data.candidates?.[0]?.content?.parts?.[0]?.text) {
          const generatedText = data.candidates[0].content.parts[0].text;
          resultDiv.textContent = `‚úÖ SUCCESS! Model works!\n\nResponse: "${generatedText}"\n\nFull data:\n${JSON.stringify(data, null, 2)}`;
        } else {
          resultDiv.textContent = `‚ö†Ô∏è Unexpected response:\n\n${JSON.stringify(data, null, 2)}`;
        }
      } catch (error) {
        resultDiv.textContent = `‚ùå Error: ${error.message}`;
      }
    }
  </script>
</body>
</html>
